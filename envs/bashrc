# Utils
export PATH="$PATH:~/gdrive/logs"
export GIT_PATH="~/gdrive/uvm-pinning/"
alias bashrc="nano $GIT_PATH/envs/bashrc && source ~/.bashrc"
alias mygit="cd $GIT_PATH"
alias logs="cd $GIT_PATH/logs"

# UVMSmart
alias dock-start="sudo docker start uvmsmart"
alias dock="sudo docker exec -it uvmsmart /bin/bash"
alias dock-stop="sudo docker stop uvmsmart"
alias dock-restart="sudo docker stop uvmsmart && sudo docker start uvmsmart"
alias dock-create="sudo docker run -dit -P --name uvmsmart -v ~/gdrive/uvmsmart:/data gpgpu_uvmsmart:latest"

# mail logger
function runmail {
        ./run | tee $1.txt && mail -s $1 -a $1.txt dojin.backups@gmail.com <<< ""
}

# Project: Driver
export DRIVER_PATH="$GIT_PATH/NVIDIA-Linux-x86_64-450.51.06"
alias driver="cd $DRIVER_PATH"
alias isolate="sudo systemctl isolate multi-user.target"
alias reinstall="sudo modprobe -r nvidia-drm && sudo $DRIVER_PATH/nvidia-installer"
alias install-dojin="sudo $DRIVER_PATH/nvidia-installer"
alias install-vanilla="sudo $GIT_PATH/envs/NVIDIA-Linux-x86_64-440.59.run"
alias load="sudo systemctl start graphical.target"
alias install="isolate && install-dojin && load"
alias logprefix="sudo sed -i 's/^.*\(dojin:\)//g' /var/log/kern.log"
alias logtail="tail /var/log/kern.log"
alias makeit="sudo make IGNORE_CC_MISMATCH=1"
function logclean {
	echo > /dev/null | sudo tee /var/log/kern.log
}
function logsave {
	cp /var/log/kern.log $1
	sed -i '/.*nvidia-uvm:.*/d' $1
	sed -i 's/^.*\(dojin:\)//g' $1
	plot $1
	logclean
}

# GCC
export C_INCLUDE_PATH="/usr/include/:$CPATH"

# CUDA
export CUDA_PATH="/usr/local/cuda"
export PATH="$CUDA_PATH/bin:$PATH"
export LD_LIBRARY_PATH="$CUDA_PATH/lib64:$LD_LIBRARY_PATH"
export CPATH="$CUDA_PATH/include:$CPATH"

# GPGPU-Sim
export CUDA_INSTALL_PATH=$CUDA_PATH

# Eigen
export CPP_INCLUDE_PATH="$CPP_INCLUDE_PATH:/usr/local/include/eigen3"

# PYTHON
# alias python=python3
# alias pip=pip3

# JAVA
export CLASSPATH="/usr/local/lib:$CLASSPATH"

# Antlr
alias antlr4='java -Xmx500M -cp "/usr/local/lib/antlr-4.8-complete.jar:$CLASSPATH" org.antlr.v4.Tool'
alias grun='java org.antlr.v4.gui.TestRig'
